<!DOCTYPE html>
<html>

<head>
    <title>Teacher Dashboard</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <style>
        /* Custom CSS for this page */
        body {
            background-color: beige;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        header {
            color: #000000;
            padding: 20px;
            text-align: center;
            outline: 1px solid black;
        }

        .container {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .course-card {
            border: 1px solid #000000;
            border-radius: 2px;
            padding: 15px;
            margin: 10px auto;
            background-color: #fff9ef;
            position: relative;
            width: 50%;
        }

        .course-title {
            font-weight: bold;
            font-size: 18px;
            cursor: pointer;
            /* Make the title clickable */
        }

        .course-description {
            margin: 10px 0px;

        }

        .course-price {
            margin-top: 10px;
            font-weight: bold;
        }

        .edit-button,
        .save-button,
        .delete-button,
        .view-students-button,
        .add-course-button {
            background-color: #65b0ff;
            color: #fff;
            border: 0px solid black;
            padding: 5px 10px;
            /* border-radius: 8px; */
            border-radius: 2px;
            cursor: pointer;
            font-size: 15px;
            margin-top: 10px;
            margin-right: 5px;
        }

        .add-course-button {
            width: 300px;
            margin: auto;
        }

        .edit-button:hover,
        .save-button:hover,
        .delete-button:hover,
        .view-students-button:hover .add-course-button:hover {
            background-color: #0056b3;
            transition-duration: 0.8s;
        }

        .edit-input {
            display: none;
            width: 100%;
            padding: 5px;
            border: 1px solid #000000;
            border-radius: 2px;
            margin-top: 5px;
        }

        .edit-input:focus {
            outline: none;
            /* border: 1px solid #007BFF; */
        }

        .student-list {
            display: none;
        }

        .student-list-title {
            font-weight: bold;
            margin-top: 10px;
        }

        .student-name {
            margin-top: 5px;
        }

        /* Style for the navigation bar */
        .navbar {
            background-color: #007BFF;
            color: #fff;
        }

        header a {
            color: #000000;
            padding: 10px;
            margin: 10px;
            /* background-color: #ffa825; */
            outline: 1px solid black;
            border-radius: 2px;
            text-decoration: none;
        }

        header a:hover{
            background-color: #d8d8d8;
            /* color: white; */
            transition-duration: 0.5s;
            text-decoration: none;
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header>
        <a href="{{ url_for('home') }}">Home</a>
        <a href="{{ url_for('home') }}">Logout</a>
    </header>

    <div class="container">
        <!-- Display 3 course cards with random data -->
        <div class="course-card" data-course-id="1">
            <div class="course-title" onclick="toggleStudentList(1)">Python Programming</div>
            <div class="course-description">
                <span id="description-1">Python is a versatile and widely used high-level programming language known for its simplicity and readability. It has gained immense popularity in the world of software development, data science, web development, and more, thanks to its extensive standard library and a thriving community of developers. Python's elegant and clean syntax, combined with its robust support for various programming paradigms, such as object-oriented, functional, and procedural programming, makes it an excellent choice for both beginners and experienced programmers.
                </span>
                <input type="text" class="edit-input" id="edit-description-1">
            </div>
            <div class="course-price">
                <span id="price-1">$49.99</span>
                <input type="text" class="edit-input" id="edit-price-1">
            </div>
            <button class="edit-button" onclick="editCourse(1)">Edit</button>
            <button class="save-button" onclick="saveCourse(1)">Save</button>
            <button class="delete-button" onclick="deleteCourse(1)">Delete</button>
            <button class="view-students-button" onclick="viewStudents(1)">View Students</button>

            <div class="student-list" id="student-list-1">
                <div class="student-list-title">Students:</div>
                <!-- Add random student names here -->
                <div class="student-name">Chandan</div>
                <div class="student-name">Abhishek</div>
                <div class="student-name">krishn</div>
            </div>
        </div>

        <!-- Repeat similar structure for other courses -->
        <div class="course-card" data-course-id="2">
            <div class="course-title" onclick="toggleStudentList(2)">SQL</div>
            <div class="course-description">
                <span id="description-2">Structured Query Language (SQL) is a powerful and widely used domain-specific programming language designed for managing and manipulating relational databases. SQL allows users to interact with databases to perform tasks such as querying data, inserting, updating, and deleting records, as well as creating and modifying database structures. Its declarative nature enables users to specify what data they want and let the database engine figure out how to retrieve it efficiently. SQL is a crucial tool for data professionals, software developers, and business analysts, facilitating data retrieval and management across a wide range of applications and industries.</span></span>
                <input type="text" class="edit-input" id="edit-description-2">
            </div>
            <div class="course-price">
                <span id="price-2">$59.99</span>
                <input type="text" class="edit-input" id="edit-price-2">
            </div>
            <button class="edit-button" onclick="editCourse(2)">Edit</button>
            <button class="save-button" onclick="saveCourse(2)">Save</button>
            <button class="delete-button" onclick="deleteCourse(2)">Delete</button>
            <button class="view-students-button" onclick="viewStudents(2)">View Students</button>

            <div class="student-list" id="student-list-2">
                <div class="student-list-title">Students:</div>
                <!-- Add random student names here -->
                <div class="student-name">Linda</div>
                <div class="student-name">Emily</div>
            </div>
        </div>

        <!-- Repeat for other courses -->
        <div class="course-card" data-course-id="3">
            <div class="course-title" onclick="toggleStudentList(3)">Flask</div>
            <div class="course-description">
                <span id="description-3">Flask is a lightweight and versatile web framework for Python that has gained popularity for its simplicity and flexibility. Developed by Armin Ronacher, Flask is designed to make web application development straightforward and efficient. It offers essential tools and libraries for building web applications, allowing developers to focus on writing clean and concise code while providing the flexibility to add components and extensions as needed. Flask's minimalist design, known as "micro," makes it an excellent choice for small to medium-sized projects and prototypes, and it has a thriving community and ecosystem of extensions, making it a popular choice for web developers seeking a rapid and customizable solution for their web application needs.</span>
                <input type="text" class="edit-input" id="edit-description-3">
            </div>
            <div class="course-price">
                <span id="price-3">$100.98</span>
                <input type="text" class="edit-input" id="edit-price-3">
            </div>
            <button class="edit-button" onclick="editCourse(3)">Edit</button>
            <button class="save-button" onclick="saveCourse(3)">Save</button>
            <button class="delete-button" onclick="deleteCourse(3)">Delete</button>
            <button class="view-students-button" onclick="viewStudents(3)">View Students</button>

            <div class="student-list" id="student-list-3">
                <div class="student-list-title">Students:</div>
                <!-- Add random student names here -->
                <div class="student-name">Eva Green</div>
                <div class="student-name">Frank Davis</div>
            </div>
        </div>
    </div>

    <div class="container">

        <button class="add-course-button" onclick="addCourse()">Add Course</button>
    </div>


    </br>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script>

        function addCourse() {
            const container = document.querySelector('.container');

            // Generate a unique course ID (you can use a more sophisticated method if needed)
            const newCourseId = Date.now();

            // Create a new course card element
            const newCourseCard = document.createElement('div');
            newCourseCard.className = 'course-card';
            newCourseCard.setAttribute('data-course-id', newCourseId);

            // Populate the course card with default content (you can customize this)
            newCourseCard.innerHTML = `
        <div class="course-title" onclick="toggleEditCourse(${newCourseId})">
            <span id="title-${newCourseId}">New Course</span>
            <input type="text" class="edit-input" id="edit-title-${newCourseId}" style="font-weight:bold ">
        </div>
        <div class="course-description">
            <span id="description-${newCourseId}">Description for the new course.</span>
            <input type="text" class="edit-input" id="edit-description-${newCourseId}">
        </div>
        <div class="course-price">
            <span id="price-${newCourseId}">$0.00</span>
            <input type="text" class="edit-input" id="edit-price-${newCourseId}">
        </div>
        <button class="edit-button" onclick="editCourse(${newCourseId})">Edit</button>
        <button class="save-button" onclick="saveCourse(${newCourseId})">Save</button>
        <button class="delete-button" onclick="deleteCourse(${newCourseId})">Delete</button>
        <button class="view-students-button" onclick="viewStudents(${newCourseId})">View Students</button>

        <div class="student-list" id="student-list-${newCourseId}">
            <div class="student-list-title">Students:</div>
            <!-- Add random student names here -->
        </div>
    `;

            // Append the new course card to the container
            container.appendChild(newCourseCard);

            // Hide the course title and set the input field value to the text
            const title = document.getElementById(`title-${newCourseId}`);
            const editTitle = document.getElementById(`edit-title-${newCourseId}`);
            const inputValue = title.innerText; // Get the text from the title element
            title.style.display = 'none';
            editTitle.style.display = 'inline';
            editTitle.value = inputValue; // Set the input field value to the text

            /// Create an HTML template for the email content
            const emailContent = `
            <!DOCTYPE html>
<html>
<head>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }

        h1 {
            font-size: 32px;
            color: #007BFF;
        }

        p {
            font-size: 18px;
            line-height: 1.6;
        }

        .highlight {
            color: #007BFF;
            font-weight: bold;
        }

        ul {
            list-style-type: disc;
            padding-left: 20px;
        }

        .json-container {
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            padding: 10px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
        }

        a.highlight {
            text-decoration: none;
            color: #007BFF;
            border-bottom: 2px solid #007BFF;
            transition: border-bottom 0.3s;
        }

        a.highlight:hover {
            border-bottom: 2px solid #0056b3;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>Welcome to Our Python Course</h1>
    <p>If you have an interest in our Python programming course, here are the course details:</p>
    <ul>
        <li><strong>Course Name:</strong> Python</li>
        <li><strong>Course Description:</strong> Python programming</li>
        <li><strong>Course Price:</strong> <span class="highlight">$20</span></li>
    </ul>

    
    <p>If you have any questions or would like to enroll in the course, please <a class="highlight" href="mailto:chandugowda3811@gmail.com">contact us</a>.</p>
</div>
</body>
</html>

`;

            // Send the email content to the server via a POST request
            fetch('/send_email', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    emailContent: emailContent, // Add the HTML email content here
                }),
            })
                .then((response) => {
                    if (response.status === 200) {
                        console.log('Email sent successfully.');
                    } else {
                        console.error('Email sending failed.');
                    }
                })
                .catch((error) => {
                    console.error('Error:', error);
                });
            }
            function toggleStudentList(courseId) {
                const studentList = document.getElementById(`student-list-${courseId}`);
                studentList.style.display = studentList.style.display === 'block' ? 'none' : 'block';
            }

            function editCourse(courseId) {
                // Toggle between displaying the original content and the input fields for editing
                const description = document.getElementById(`description-${courseId}`);
                const editDescription = document.getElementById(`edit-description-${courseId}`);
                const price = document.getElementById(`price-${courseId}`);
                const editPrice = document.getElementById(`edit-price-${courseId}`);

                description.style.display = description.style.display === 'none' ? 'inline' : 'none';
                price.style.display = price.style.display === 'none' ? 'inline' : 'none';
                editDescription.style.display = editDescription.style.display === 'none' ? 'inline' : 'none';
                editPrice.style.display = editPrice.style.display === 'none' ? 'inline' : 'none';
            }

            function saveCourse(courseId) {
                // Toggle between displaying the original content and the input fields for editing

                const description = document.getElementById(`description-${courseId}`);
                const editDescription = document.getElementById(`edit-description-${courseId}`);
                const price = document.getElementById(`price-${courseId}`);
                const editPrice = document.getElementById(`edit-price-${courseId}`);

                description.innerHTML = editDescription.value;
                price.innerHTML = editPrice.value;

                description.style.display = 'inline';
                price.style.display = 'inline';
                editDescription.style.display = 'none';
                editPrice.style.display = 'none';
            }

            function deleteCourse(courseId) {
                const courseCard = document.querySelector(`.course-card[data-course-id="${courseId}"]`);
                if (courseCard) {
                    courseCard.remove();
                }
            }

            function viewStudents(courseId) {
                const studentList = document.getElementById(`student-list-${courseId}`);
                studentList.style.display = 'block';
            }
    </script>
</body>

</html>